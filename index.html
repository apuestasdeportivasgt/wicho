<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Reproductor HLS</title>
  <style>
    body { font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; display:flex; align-items:center; justify-content:center; min-height:100vh; margin:0; background:#0f172a; color:#e6eef8; }
    .player { width: 90vw; max-width: 900px; }
    video { width:100%; height:auto; background:black; border-radius:10px; box-shadow:0 6px 20px rgba(2,6,23,0.6); }
    .info { margin-top:10px; font-size:14px; color:#9fb0d9; }
    .error { color:#ff7b7b; }
  </style>
</head>
<body>
  <div class="player">
    <video id="video" controls playsinline crossorigin="anonymous"></video>
    <div class="info">
      Fuente: <code>https://d2qsan2ut81n2k.cloudfront.net/live/c2cce928-c69c-45d5-bd0a-5a5eba167a0d/ts:abr.m3u8</code>
      <div id="status"></div>
    </div>
  </div>

  <!-- hls.js CDN (usa la versión más reciente si lo deseas) -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.0/dist/hls.min.js"></script>
  <script>
    const video = document.getElementById('video');
    const status = document.getElementById('status');
    const url = 'https://d2qsan2ut81n2k.cloudfront.net/live/c2cce928-c69c-45d5-bd0a-5a5eba167a0d/ts:abr.m3u8';

    function setStatus(msg, isError) {
      status.textContent = msg;
      status.className = isError ? 'error' : '';
    }

    // Si el navegador soporta HLS nativo (Safari), usa el src directo
    if (video.canPlayType('application/vnd.apple.mpegurl')) {
      video.src = url;
      setStatus('Reproduciendo con HLS nativo del navegador.');
      video.addEventListener('error', () => setStatus('Error de reproducción nativa. Revisa consola y CORS.', true));
    } else if (window.Hls && Hls.isSupported()) {
      const hls = new Hls({
        // debug: true
      });
      hls.attachMedia(video);
      hls.on(Hls.Events.MEDIA_ATTACHED, function () {
        setStatus('Cargando playlist con hls.js …');
        hls.loadSource(url);
      });

      hls.on(Hls.Events.MANIFEST_PARSED, function () {
        setStatus('Manifest cargado — puedes reproducir.');
        video.play().catch(()=>{/* reproducción automática bloqueada por política */});
      });

      hls.on(Hls.Events.ERROR, function (event, data) {
        console.error('hls.js error', event, data);
        setStatus('Error hls.js: ' + (data && data.type ? data.type + ' — ' + (data.details || '') : 'desconocido'), true);
      });
    } else {
      setStatus('HLS no es compatible en este navegador.', true);
    }
  </script>
</body>
</html>
